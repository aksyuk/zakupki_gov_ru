
# Скрипты для загрузки данных с ftp госзакупок   

Автор: Суязова (Аксюк) Светлана [s.a.aksuk@gmail.com](mailto:s.a.aksuk@gmail.com)   
Последнее большое обновление: 08 Mar 2020 :bouquet: :ice_cream: :coffee:    

# Справочник по скриптам   

Порядок выполнения скриптов для загрузки данных по электронным аукционам с [ftp.zakupki.gov.ru](http://ftp.zakupki.gov.ru/) по 44ФЗ:   
  
1. `parser-ftp-01_Setup-fz44.R` -- подготовка рабочего пространства, создание директорий под данные.
2. `parser-ftp-02_Load-Unzip-and-Index-fz44.R` -- загрузка и распаковка (сторонними средствами), индексация скачанных файлов. Самый длительный этап. :clock730:       
3. `parser-ftp-03_Parse-Loaded-XML-fz44.R` -- парсинг распакованных XML-файлов по закупкам. Второй по длительности этап :clock330:. В файле ./data/reference/df_xml_patterns.csv находятся xpath-запросы для разбора разных типов xml-файлов.   
4. `parser-ftp-04_Prepare-Data-for-Models.R` -- вычисление переменных под модели, совмещение таблиц. Идентификатор заявки `purchiseNumber` может дублироваться, в нескольких аукционах, и непонятно, что с этим делать. Сейчас скрипт оставляет только самые свежие из протоколов и заявок с одним и тем же `purchiseNumber`. В идеале надо смотреть глубже и связывать такие повторы в отдельные цепочки. Пока не знаю как. :woman_shrugging:   

Ещё вам понадобится:    

* много свободного места на жёстком диске    
* много времени     
* много оперативной памяти    
* FileZilla или другой ftp-менеджер для загрузки архивов (в R это дольше и без возможности докачки)    
* архиватор для распаковки архивов (в R получается дольше и чревато ошибками)    
 
 
 
